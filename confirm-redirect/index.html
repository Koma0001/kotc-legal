<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>King of the City - Confirm Email</title>
  <meta name="description" content="Open King of the City app to complete email confirmation." />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
      background: radial-gradient(circle at top, #16213a 0%, #0d1220 45%, #070b14 100%);
      color: #e8ecf4;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    body.visible { opacity: 1; }
    .card {
      width: 100%;
      max-width: 460px;
      background: rgba(12, 17, 30, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 16px;
      padding: 28px 22px;
      text-align: center;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
    }
    h1 { margin: 0 0 8px; font-size: 28px; color: #ffffff; }
    p.subtitle { margin: 0 0 22px; color: #c8d1e0; line-height: 1.45; font-size: 15px; }
    .btn {
      display: block; width: 100%; border: 0; border-radius: 12px;
      text-decoration: none; padding: 14px 16px; font-weight: 700;
      font-size: 16px; background: #2fd9ff; color: #07111d;
      margin: 0 0 12px; -webkit-tap-highlight-color: transparent;
    }
    .btn:active { background: #22c5eb; }
    .alt { display: inline-block; margin-top: 2px; color: #8fdfff; text-decoration: underline; font-size: 14px; }
    .help { margin-top: 18px; color: #aeb7c8; font-size: 13px; line-height: 1.5; }
    .help p { margin: 6px 0; }
  </style>
</head>
<body>
  <main class="card">
    <h1>King of the City</h1>
    <p class="subtitle">Confirming your email. Opening the app now&hellip;</p>
    <a id="btn" class="btn" href="intent://confirm-email#Intent;scheme=kotc;package=com.koma0001.kotc;end">Open App</a>
    <a id="alt" class="alt" href="kotc://confirm-email">Alternate link</a>
    <div class="help">
      <p>If the app doesn't open automatically, tap the button above.</p>
      <p>Make sure King of the City is installed.</p>
    </div>
  </main>
  <script>
    (function () {
      var queryParams = new URLSearchParams(location.search || "");
      var hashRaw = (location.hash || "").replace(/^#/, "");
      var hashParams = new URLSearchParams(hashRaw);
      var merged = new URLSearchParams();
      queryParams.forEach(function (value, key) { merged.set(key, value); });
      hashParams.forEach(function (value, key) { if (!merged.has(key)) merged.set(key, value); });
      var mergedQuery = merged.toString();
      var querySuffix = mergedQuery ? ("?" + mergedQuery) : "";
      var intentHref = "intent://confirm-email" + querySuffix + "#Intent;scheme=kotc;package=com.koma0001.kotc;end";
      var altHref = "kotc://confirm-email" + querySuffix;
      var btn = document.getElementById("btn");
      var alt = document.getElementById("alt");
      if (btn) btn.href = intentHref;
      if (alt) alt.href = altHref;
      try { location.replace(intentHref); } catch (e) {}
      setTimeout(function () { document.body.classList.add("visible"); }, 1000);
    })();
  </script>
</body>
</html>
